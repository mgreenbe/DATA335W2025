/* Copyright (c) 2013-2024 Trialfire Inc. All rights reserved. */!function(){"use strict";window.Trialfire=function(a){return a||(a={}),a.config={},a.services={},a.modules={},a.vendor={},a.classes={},a}(window.Trialfire),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=new Array(c),e=arguments.length>=2?arguments[1]:void 0,f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(arguments.length>=2)b=arguments[1];else{for(;e<d&&!e in c;)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;e<d;e++)e in c&&(b=a(b,c[e],e,c));return b}),!function(){var a,b,c,d;!function(){var e={},f={};a=function(a,b,c){e[a]={deps:b,callback:c}},d=c=b=function(a){function c(b){if("."!==b.charAt(0))return b;for(var c=b.split("/"),d=a.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d._eak_seen=e,f[a])return f[a];if(f[a]={},!e[a])throw new Error("Could not find module "+a);for(var g,h=e[a],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)"exports"===i[l]?k.push(g={}):k.push(b(c(i[l])));var n=j.apply(this,k);return f[a]=g||n}}(),a("promise/all",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0===--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),a("promise/asap",["exports"],function(a){function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new i(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){j.setTimeout(e,1)}}function e(){for(var a=0;a<k.length;a++){var b=k[a],c=b[0],d=b[1];c(d)}k=[]}function f(a,b){var c=k.push([a,b]);1===c&&g()}var g,h="undefined"!=typeof window?window:{},i=h.MutationObserver||h.WebKitMutationObserver,j="undefined"!=typeof global?global:this||window,k=[];g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():i?c():d(),a.asap=f}),a("promise/cast",["exports"],function(a){function b(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=this;return new b(function(b){b(a)})}a.cast=b}),a("promise/config",["exports"],function(a){function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),a("promise/polyfill",["./promise","./utils","exports"],function(a,b,c){function d(){var a="Promise"in Trialfire.classes&&"cast"in Trialfire.classes.Promise&&"resolve"in Trialfire.classes.Promise&&"reject"in Trialfire.classes.Promise&&"all"in Trialfire.classes.Promise&&"race"in Trialfire.classes.Promise&&function(){var a;return new Trialfire.classes.Promise(function(b){a=b}),f(a)}();a||(Trialfire.classes.Promise=e)}var e=a.Promise,f=b.isFunction;c.polyfill=d}),a("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h,i){function j(a){if(!w(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof j))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],k(a,this)}function k(a,b){function c(a){p(b,a)}function d(a){r(b,a)}try{a(c,d)}catch(e){d(e)}}function l(a,b,c,d){var e,f,g,h,i=w(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;o(b,e)||(i&&g?p(b,e):h?r(b,f):a===F?p(b,e):a===G&&r(b,e))}function m(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+F]=c,e[f+G]=d}function n(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],l(b,c,d,f);a._subscribers=null}function o(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(v(b)&&(d=b.then,w(d)))return d.call(b,function(d){return!!c||(c=!0,void(b!==d?p(a,d):q(a,d)))},function(b){return!!c||(c=!0,void r(a,b))}),!0}catch(e){return!!c||(r(a,e),!0)}return!1}function p(a,b){a===b?q(a,b):o(a,b)||q(a,b)}function q(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(s,a))}function r(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(t,a))}function s(a){n(a,a._state=F)}function t(a){n(a,a._state=G)}var u=a.config,v=(a.configure,b.objectOrFunction),w=b.isFunction,x=(b.now,c.cast),y=d.all,z=e.race,A=f.resolve,B=g.reject,C=h.asap;u.async=C;var D=void 0,E=0,F=1,G=2;j.prototype={constructor:j,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;u.async(function(){l(c._state,d,e[c._state-1],c._detail)})}else m(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}},j.all=y,j.cast=x,j.race=z,j.resolve=A,j.reject=B,i.Promise=j}),a("promise/race",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),a("promise/reject",["exports"],function(a){function b(a){var b=this;return new b(function(b,c){c(a)})}a.reject=b}),a("promise/resolve",["exports"],function(a){function b(a){var b=this;return new b(function(b){b(a)})}a.resolve=b}),a("promise/utils",["exports"],function(a){function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),b("promise/polyfill").polyfill()}(),function(a){a.key=null,a.log=!1,a.outboundLinkDelay=300,a.captureFlushInterval=2e3,a.listenAttribute="data-tf-inspect",a.textContentLimit=100,a.impressionInterval=2e3,a.heartbeatInterval=3e5,a.optOutCookieName="do_not_track",a.sendInitialPageView=!0,a.sendSPAPageViews=!0,a.inputEmailRegex=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.([a-z]{2,64})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,a.fieldBlacklist=[],a.redirectTimeout=1e4,a.identityStorageKey="tfID00",a.traitsStorageKey="tfUT00",a.route=function(b,c){var d=a.serverUrl(b,c);return d=d.replace(":apiToken",a.key)}}(window.Trialfire.config),function(a){var b="trialfire.com";a.serverUrl=function(a,c){return(c||"https:")+"//app."+b+(a||"")},a.assetUrl=function(a){return"https://cdn."+b+(a||"")},a.tenantScriptUrl=function(b){return a.assetUrl("/tenantScripts/"+a.key+"/"+b)}}(window.Trialfire.config),function(a){function b(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(b){return"[cyclic]"}}function c(){return window.console&&window.console.log&&Trialfire.config.log&&Function.prototype.apply.call(window.console.log,window.console,Array.prototype.slice.call(arguments)),Array.prototype.slice.call(arguments).reduce(function(a,c){return c?a+" "+b(c):a},"").trim()}localStorage&&localStorage.getItem("_tf_log")&&(a.config.log=!0),a.setLoggingOn=function(){a.config.log=!0,localStorage.setItem("_tf_log","1")},a.setLoggingOff=function(){a.config.log=!0,localStorage.removeItem("_tf_log")},a.log=c;var d=function(a){return d.loggers[a.name]||d.newLogger(a)};d.loggers={},d.newLogger=function(a){var b=function(){var b=Array.prototype.slice.call(arguments);return"string"==typeof b[0]?b[0]=a.name+": "+b[0]:b.unshift(a.name+":"),c.apply(null,b)};return d.loggers[a.name]=b,b},a.services.logger=d}(window.Trialfire),function(a){var b=a.services.logger({name:"notify"}),c=a.services.notify||{callbacks:{}};c.notify=function(a,d,e){var f;if(c.callbacks[a]){var g=c.callbacks[a].slice();for(f=0;f<g.length;f++)try{g[f](d,a)}catch(h){b("error",{event:a,data:d,error:h}),e&&e(h)}}},c.listen=function(a,b){c.callbacks[a]=c.callbacks[a]||[],~c.callbacks[a].indexOf(b)||c.callbacks[a].push(b)},c.addListener=c.listen,c.remove=function(a,b){var d;if(c.callbacks[a])for(d=0;d<c.callbacks[a].length;d++)if(c.callbacks[a][d]===b)return void c.callbacks[a].splice(d,1)},c.removeListener=c.remove,c.reset=function(){c.callbacks={}},a.services.notify=c}(window.Trialfire),Trialfire.services.listen=Trialfire.services.listen||function(){function a(a){return a===window?v:a===window.document?u:t}function b(a){return a===window?D:a===window.document?C:B}function c(a,b,c){var d;try{return a.apply(b,c)}catch(e){Trialfire.log("bogusCall strategy #1 failed",e)}try{return Function.prototype.apply.call(a,b,c)}catch(e){Trialfire.log("bogusCall strategy #2 failed",e)}try{return b.$$trialfire_propertyName_nobody_will_EVER_use=a,d=b.$$trialfire_propertyName_nobody_will_EVER_use.apply(c),delete b.$$trialfire_propertyName_nobody_will_EVER_use,d}catch(e){Trialfire.log("bogusCall strategy #3 failed",e)}}function d(a,b){var c,d,e,f;for(c=z.length-1;c>=0;--c)if(e=z[c],e.target===a&&e.args.length===b.length){for(d=0;d<b.length&&b[d]===e.args[d];++d);if(d===b.length)break}return f=c}function e(a,b){~d(a,b)||z.push({target:a,args:b})}function f(a,b){var c=d(a,b);~c&&z.splice(c,1)}function g(){if(e(this,arguments),y)return"click"===arguments[0]&&k(this,n(""+arguments[1])),c(a(this),this,arguments)}function h(){if(f(this,arguments),y)return l(this),c(b(this),this,arguments)}function i(){A&&!F&&(A[w]=g,A[E]=h,window instanceof x||(window[w]=g,window[E]=h),window.document instanceof x||(window.document[w]=g,window.document[E]=h),F=!0)}function j(){A&&F&&(A[w]=t,A[E]=B,window instanceof x||(window[w]=v,window[E]=D),window.document instanceof x||(window.document[w]=u,window.document[E]=C),m(),z.length=0,F=!1)}function k(a,b){return a&&a.setAttribute&&a.setAttribute(Trialfire.config.listenAttribute,b)}function l(a){return a&&a.removeAttribute&&a.removeAttribute(Trialfire.config.listenAttribute)}function m(){z.forEach(function(a){l(a.target)})}function n(a){var b=0;if(0===a.length)return b;for(var c,d=0,e=a.length;d<e;d++)c=a.charCodeAt(d),b=(b<<5)-b+c,b|=0;return b}function o(){y&&F&&(z.forEach(function(a){c(B,a.target,a.args)}),y=!1)}function p(){!y&&F&&(z.forEach(function(a){c(t,a.target,a.args)}),y=!0)}function q(){return!y}function r(){return y}function s(){var a=Trialfire.services.listen,b=Trialfire.services.notify,c=!1;a.addEventListenerToWindow.call(window,"beforeunload",function(a){c=!0,b.notify("beforeunload",a)}),a.addEventListenerToWindow.call(window,"unload",function(a){c||b.notify("beforeunload",a)})}var t,u,v,w,x,y,z,A,B,C,D,E,F;return x=window.EventTarget||window.Element,A=x&&x.prototype,w=A&&A.addEventListener?"addEventListener":"attachEvent",E=A&&A.removeEventListener?"removeEventListener":"detachEvent",t=A?A[w]:function(){},u=window.document[w],v=window[w],B=A?A[E]:function(){},C=window.document[E],D=window[E],F=!1,z=[],y=!0,{addAndRegisterEventListener:g,addEventListener:t,addEventListenerToDocument:u,addEventListenerToWindow:v,disable:o,enable:p,isDisabled:q,isEnabled:r,removeAndUnregisterEventListener:h,removeEventListener:B,removeEventListenerFromDocument:C,removeEventListenerFromWindow:D,startSpying:i,stopSpying:j,installBeforeUnloadListeners:s}}(),function(a){var b=a.services.message||{listeners:{}};b.postMessage=function(a){var b=Trialfire.config;return!(window.parent===window||!window.parent||!window.parent.postMessage)&&(window.parent.postMessage(a,b.serverUrl(null,"http:")),!0)},b.addListener=function(a,c){b.listeners[a]?b.listeners[a].push(c):b.listeners[a]=[c]},b.removeListener=function(a,c){if(b.listeners[a]){var d=b.listeners[a].findIndex(function(a){return a===c});d>=0&&b.listeners[a].splice(d,1)}},b.onMessage=function(a){var c=Trialfire.config;if(a.origin===c.serverUrl(null,"http:")&&a.data.topic){var d=b.listeners[a.data.topic];if(d)for(var e=0;e<d.length;e++)d[e](a.data)}},Trialfire.services.listen.addEventListenerToWindow.call(window,"message",b.onMessage,!0),a.services.message=b}(window.Trialfire),function(a){var b={$queue:[]};["ready","identify","property","logout","track","optout","page"].forEach(function(c){b[c]=function(){b.$queue.push([c].concat([].slice.call(arguments)))},a[c]=function(){b[c].apply(null,[].slice.call(arguments))}}),a.services.analytics=b}(window.Trialfire),Trialfire.services.media=Trialfire.services.media||function(a,b){function c(b){a.videoServiceOrigins.some(function(a){return!!~b.origin.indexOf(a)})&&a.postMessageBuffer.push(b)}function d(){window.postMessage&&(b("media: start buffering video service messages"),Trialfire.services.listen.addEventListenerToWindow.call(window,"message",a.bufferMessage))}function e(){window.postMessage&&(b("media: stop buffering video service messages"),Trialfire.services.listen.removeEventListenerFromWindow.call(window,"message",a.bufferMessage))}return a.videoServiceOrigins=["youtube.com","player.vimeo.com","players.brightcove.net"],a.postMessageBuffer=[],a.bufferMessage=c,a.startBufferingMessages=d,a.stopBufferingMessages=e,a.startBufferingMessages(),a}(Trialfire.services.media||{},Trialfire.log),function(a){function b(){d("loading capture module");var b=a.loadScript(a.config.assetUrl("/tf.stage1.js")).then(function(){return a.modules.capture.init(a.modules)}).then(function(){e.modules.capture=!0,a.services.message.postMessage({topic:"tf-status",data:a.getStatus()})})["catch"](function(a){throw{message:d("loading capture module failed",a),cause:a}});return e.$capturePromise=b,b}function c(b){a.modules.capture.stopCapturing(),d("loading pinning module");var c=a.loadScript(a.config.assetUrl("/tf.stage2.js")).then(function(){return a.modules.pinning.init(a.modules,b)}).then(function(){e.modules.pinning=!0,a.services.message.postMessage({topic:"tf-status",data:a.getStatus()})})["catch"](function(a){throw{message:d("loading pinning module failed",a),cause:a}});return e.$pinningPromise=c,c}var d=a.services.logger({name:"init"}),e={firstInit:!1,modules:{capture:!1,pinning:!1}};if(a.$queue=a.$q||[],a.$initId)return a;a.$initId=(new Date).getTime(),a.getCookie=function(a){try{var b=new RegExp(a+"=([^;]+)").exec(document.cookie);return b?b[1]:null}catch(c){return null}},a.getHeadOrBody=function(b){var c=document.head||document.body;c?b(c):setTimeout(function(){a.getHeadOrBody(b)},10)},a.createScriptElement=function(){return window.CloudFlare?Document.prototype&&Document.prototype.createElement?Document.prototype.createElement.call(document,"script"):void 0:document.createElement("script")},a.loadScript=function(b){return new Trialfire.classes.Promise(function(c,d){var e=a.createScriptElement();e.src=b,e.onload=function(){c(e),e.parentNode.removeChild(e)},e.onerror=function(a){d(a),e.parentNode.removeChild(e)},a.getHeadOrBody(function(a){a.appendChild(e)})})["catch"](function(a){throw{message:d("script at",b,"could not be loaded",a),src:b,cause:a}})},a.isUnsupportedUserAgent=function(a){var b=["crawl","robot"," bot ","scrape","spider","chrome-lighthouse","cloudflare","facebookexternalhit","gomezagent","google web preview","ia_archiver","observepoint","pagespeed","page speed","slurp","sogou","preview","cincraw","seekportbot"],c=[/msie [67]\./,/bot$|\/bots?\)|([^cuid]{2})bot[.\/;)_-]|bot\sv?\d|\Wbot\W/];try{a=a.toLowerCase();for(var e=0;e<b.length;e++)if(~a.indexOf(b[e]))return!0;for(var f=0;f<c.length;f++)if(c[f].test(a)){if(/\msie 7\.0.+trident\b/.test(a))continue;return!0}}catch(g){return d("UA check failed",g),!1}return!1},a.getStatus=function(){return{apiToken:a.config.key,initId:a.$initId,modules:e.modules}},a.setOptions=function(b){if("string"==typeof b)a.config.key=b;else if("object"==typeof b)for(var c in b)b.hasOwnProperty(c)&&(a.config[c]=b[c]);"function"==typeof window.__tfConfigMutate&&window.__tfConfigMutate(a.config)},a.init=function(f){if(a.isUnsupportedUserAgent(navigator.userAgent))return void d("user agent not supported");if(a.getCookie(Trialfire.config.optOutCookieName))return void d("opt out cookie is present");if(!e.firstInit){try{a.setOptions(f)}catch(g){d("invalid options",g)}d("first init"),e.firstInit=!0;try{a.services.listen.startSpying()}catch(g){d("failed to start listening",g)}return a.services.listen.installBeforeUnloadListeners(),a.services.message.addListener("tf-initPinning",function(a){d("got request to enter pinning mode",a),e.$capturePromise.then(function(){c(a)})}),b()["catch"](function(a){d("failed to init",a)})}d("already init")},a.destroy=function(){for(var b in a.modules)a.modules.hasOwnProperty(b)&&a.modules[b].destroy&&a.modules[b].destroy()},a.trackOffline=function(a){var b=Trialfire.config;a=a||{};var c=a.apiToken||b.key;if(!c)throw new Error("Could not determine API token; provide apiToken or call Trialfire.init().");if(!a.eventName)throw new Error("Property eventName is requried.");var d=a.userTraits||{};if(!a.userId&&!d.email)throw new Error("Property userId or userTraits.email is required.");var e=null,f=null,g=[["name",a.eventName]];if(a["import"]&&g.push(["import","1"]),a.userId&&g.push(["userId",a.userId]),"object"==typeof a.userTraits)for(e in a.userTraits)f=a.userTraits[e],void 0!==f&&null!==f&&g.push(["u["+e+"]",f]);if("object"==typeof a.properties){for(e in a.properties)f=a.properties[e],"products"!==e&&void 0!==f&&null!==f&&g.push(["p["+e+"]",f]);var h=a.properties.products;if("object"==typeof h)for(var i=0;i<h.length;i++)for(e in h[i])f=h[i][e],void 0!==f&&null!==f&&g.push(["prod["+i+"]."+e,f])}a.source&&g.push(["source",a.source]);var j=g.map(function(a){return encodeURIComponent(a[0])+"="+encodeURIComponent(a[1])}).join("&"),k=new Image(1,1);k.src=Trialfire.config.route("/v2/p/"+c+"?"+j)},a["do"]=function(){var b=[].slice.call(arguments),c=a[b.shift()];c&&c.apply(a,b)};var f=document.body&&document.body.getAttribute("data-tf-api-token");f&&(a.log("init: api token found on body"),a.init(f));for(var g=null;g=a.$queue.shift();)try{a["do"].apply(a,g)}catch(h){a.log("init: error on call",g,h)}return a}(window.Trialfire)}();
/* Date: Mon 09 Dec 2024 05:35:40 PM UTC Rev: 94b0360efe0e9fdad5f2f54324ef8c8e29235162 Build: 288 refs/heads/develop */